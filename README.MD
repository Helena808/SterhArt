# SterhArt

## 09.10.2020
* добавлена кнопка "удалить проект" в кабинете исполнителя, прописан метод в котроллере и доп. фунции в репозиториях sketch и concept;
* прописала скрипт в custom.js для отображения загружаемых файлов в форме загрузки у заказчика;
* при добавлении новой строки для подвеса картинок отображается имя старого файла. Подружила два скрипта, теперь название файла меняется при подгрузке нового;
* перезалила всё на хостинг, почистила кеш;
* дата и время устанавливаются корректно, всё ок.

***


## 08.10.2020
* форма addComment приведена в божеский вид, с учётом изменения в DOM поправлены селекторы в custom.js в обработчике события;

***

## 05.10.2020
* ### Возможность загрузки картинок пользователем (продолжение) ###
	5. Присваивание корректных name новым срокам для добавления картинок с аннотациями - добила (custom.js);
	6. Внесены изменения в обработчик формы в контроллере (создание новых объектов Concept с указанием аннотаций, и привязкка их к текущему объекту Renewal, сохранение картинок);
	7. Добавлен вывод картинок (concepts) и галереи с их описанием в личных кабинетах;

* Добить визуал формы добавления комментария пользователем (колонки арарар!!!)


***

## 30.09.2020
* изменена форма добавления комментария исполнителя (required);
* добавлен favicon;
* ### Возможность загрузки картинок пользователем ###
	0. Prod->dev (.env, .env.local);
	1. Создана сущность Concept для хранения имен файлов с внешним ключом - Renewal;
	2. Создан новый маршрут в sevices.yaml;
	3. Изменяю форму добавления комментария;
	4. Динамическое добавление новых полей для загрузки картинок и присваивание им нужных name реализовано на JQuery.

*TODO:
- добить цикл присваивания name в custom.js;
- дополнить/добавить методы в контроллере клиента и репозитории Concept;
- подбить твиг, увязать с контроллером, навести красоту.

***

## 27.09.2020
* убрала баг в переадресации при создании нового проекта в ExecController

*TODO:
- возможность загрузки картинок пользователем в обновлениях


***

## 25.09.2020
* сменила среду на prod в .env
* установила ssl сертификат, прописала перенаправление в .htaccess


***

## 23.09.2020
* перехешировала пароли пользователей непосредственно на хостинге через консоль. Всё работает.
* незначительные изменения в твигах личных кабинетов (отображения даты комментариев, информационные сообщения и т.п.)
* в Контактах обновила устаревшую ссылку на скрипт с иконками, уточнила стили для иконок, перекомпилировала и перезалила build


***

## 21.09.2020
* на нашла хостинг с нужной версией MySQL, вернула 5.7 в .env и doctrine.yaml
* для конфигурации веб-сервера установила apache-pack, прописала настройки в .htaccess
* импортирована БД, в файле .env , размещённом на хостинге, указана корректная ссылака на БД. 
! В файле .env НА ЛОКАЛКЕ ДРУГАЯ ССЫЛКА НА БД, чтобы всё работало !
* затык с паролями пользователей: из-за разных методов хеширования сайт не принимает пароли. Написала в поддержку.


***

## 27.06.2020
* на хостинге стоит MySQL 5.6, который не поддерживает тип данных json. Похоже, придётся переделывать сущности, контроллеры, security.yaml и контроль доступа в твиг-файлах((((
* поменяла версии mySQL на 5.6 в .env и doctrine.yaml

***


## 27.06.2020
* навела порядок в assets, перенастроила webpack encore
* переподключила fancybox (без костылей)
* в fancybox.min.css в начале добавила миксины для устранения ошибки с функцией max/min, которые возникли при сборке (из-за scss)
* подключила gridify
* подключила custom.js со своими настройками. 
Всё подтягивается, галерея работает как надо.

### Готово для выгрузки на хостинг

***

## 09.06.2020
* разбираюсь с assets и webpack encore, чтобы нормально подключить библиотеки.

***

## 08.06.2020
* выпилила gridify, т.к. не смогла его нормально установить

***

## 06.06.2020
* Исправлена ошибка в сущностях Project и Stage в общих их свойствах (с ManyToOne связью).
* Пока просто написала предупреждение о предельной величине порции картинок - 20 Мб
* 1 проект есть _без описания_
* создала customCarousel.js и в нём настроила галерею. Файл подключила в base после jquery, app.js и fancybox.
* установила плагин __gridify__ для создания человеческой сетки картинок (см. [тут](https://itchief.ru/bootstrap/image-gallery)). Как и в случае с fancybox, пришлось скопировать основной файл в public.

###АХТУНГ!!!!
__После перезагрузки encore из public удаляются все кастомные js/css файлы!!!!!!!!!__

### ТУДУ:
- сделать отображение галереи не таким богомерзким (вертикальные изображения арарарррр!)
- разобраться с ахтунгом

***

## 06.06.2020
* Добавлено свойство с датой комментария заказчика, реализован функционал под него в контроллере и твиге.
* Исполнитель может удалять\редактировать свой комментарий, если ещё нет ответа заказчика.
* Крошки в onePortfolio.
* Страница Контакты. От формы обратной связи отказались.
* Ссылки в карточках в портфолио и кабинетах растянуты на всю карточку.

### ТУДУ:
- исправить ошибку доктрины с ManyToOne связью Project и Stage (!)
- в форме добавления\редактирования проекта для портфолио добавить плашку с ограничением количества картинок.
- залить 1-2 проекта в портфолио
***

## 25.05.2020
* Созданы две Entity:
    * Photo >- Project
    * Sketch >- Renewal
* Созданы формы для нового Project и Renewal, предусматривающие загрузку картинок.
* В /public/ созданы папки photos и sketches для созранения картинок, пути прописаны в services.yaml.
* Переписаны соответствующие методы в контроллерах и twig-файлы.

#### => полностью реализована загрузка картинок.

* Интегрирована библиотека Fancybox: установка через yarn, ссылки на её js и css библиотеки для галереи скопированы в public. Не уверена, что правильно, но работает.
* Посредством Fancybox созданы 2 галереи


### ТУДУ:
- в Renewal добавить свойство, содержащее дату комментария заказчика
- предусмотреть оное в контроллерах и твигах исполнителя и заказчика
- в кабинете заказчика реализовать возможность удаления/корректировки(?) последнего Renewal
- крошки в onePortfolio (или просто кнопка "Вернуться")
- фронт страницы Контакты
- возможность отправки писем на мыло со страницы Контакты
***

## 07.05.2020
Коммит до внесения изменений в структуру БД для реализации upload & download файлов и полноценной галереи.
(добавится новая сущность Картинки, а у сущностей Проект и Обновления пропадут свойства с картинками).

Всё остальное работает.

Фронт - весь.

### ТУДУ:
- галерея в портфолио
- загрузка\выгрузка (галерея?) картинок в кабинетах
- фронт страницы Контакты
- возможность отправки писем на мыло со страницы Контакты
***